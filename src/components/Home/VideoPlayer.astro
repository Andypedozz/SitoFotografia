---
export interface Props {
  videoPath: string;
  poster?: string;
  autoPlay?: boolean;
  loop?: boolean;
  muted?: boolean;
  controls?: boolean;
  width?: string | number;
  height?: string | number;
  className?: string;
}

const {
  videoPath,
  poster = '',
  autoPlay = false,
  loop = false,
  muted = false,
  controls = true,
  width = '100%',
  height = 'auto',
  className = '',
} = Astro.props;

const widthStr = typeof width === 'number' ? `${width}px` : width;
const heightStr = typeof height === 'number' ? `${height}px` : height;
---

<div class={`video-wrapper ${className}`} style={`width: ${widthStr};`}>
  <video
    src={videoPath}
    {poster}
    {autoPlay}
    {loop}
    {muted}
    {controls}
    preload="metadata"
    style={`width: 100%; height: ${heightStr};`}
    class="simple-video"
    playsinline
  >
    Il tuo browser non supporta il tag video.
    <a href={videoPath}>Scarica video</a>
  </video>
</div>

<style>
  .video-wrapper {
    background-color: #000;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
    margin: 20px 0;
  }
  
  .simple-video {
    display: block;
    background-color: #000;
    object-fit: contain;
  }
  
  .simple-video::-webkit-media-controls-panel {
    background-color: rgba(0, 0, 0, 0.7);
  }
</style>