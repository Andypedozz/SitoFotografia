---
import Panel from "./Panel.astro";
import MediaContainer from "./MediaContainer.astro"
import FormGroup from "./FormGroup.astro";

const uploadMediaFields = [
    { id: "progetto_associato" , label: "Progetto associato", type: "input", inputType: "text" , placeholder: "Progetto associato" },
    { id: "tipo" , label: "Tipo di media", type: "input", inputType: "text" , placeholder: "Tipo di media" },
    { id: "file" , label: "File", type: "input", inputType: "file", placeholder: "File" }
]

const url = new URL("/api/media", Astro.request.url);
const res = await fetch(url);
const medias = await res.json();
---

<Panel title="Gestione Media" pageId="media">
    <style>
        .container {
            display: flex;
            flex-direction: row;
            margin: 2%;
        }
    </style>
    <div class="container">
        <FormGroup title="Aggiungi nuovi media" fields={uploadMediaFields}/>
        <MediaContainer medias={medias}/>
    </div>
</Panel>